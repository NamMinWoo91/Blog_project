{% extends 'base.html' %}
{% load static %}
{% block title %}블로그 게시물{% endblock %}
{% block content %}

<div class="container">
    <h1 class="page-title">블로그 게시물</h1>

    <a href="{% url 'blog_page:post_create' %}" class="btn btn-primary">글 작성하기</a>

    <form action="{% url 'blog_page:search' %}" method="get" class="search-form">
        <input type="text" name="q" placeholder="글 제목">
        <select name="category">
            <option value="">카테고리</option>
            {% for category in categories %}
                <option value="{{ category.slug }}">{{ category.name }}</option>
            {% endfor %}
        </select>
        <button type="submit">검색</button>
    </form>

    <div class="post-grid">
        {% for post in posts %}
            <div class="post-card">
                {% if post.head_image %}
                    <img src="{{ post.head_image.url }}" alt="{{ post.title }}" class="post-image">
                {% else %}
                    <img src="{% static 'img/default-post-image.jpg' %}" alt="Default Image" class="post-image">
                {% endif %}
                <h2 class="post-title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
                <p class="post-meta">by {{ post.author }} on {{ post.created_at }}</p>
                <p class="post-excerpt">{{ post.content|truncatewords:30 }}</p>
            </div>
        {% empty %}
            <p>게시글이 없습니다.</p>
        {% endfor %}
    </div>
</div>

{% endblock %}

{% block content %}
    <h2>{{ post.title }}</h2>
    <p>by {{ post.author }} on {{ post.created_at }} | 조회수: {{ post.views_count }}</p>
    <div>{{ post.content }}</div>

    {% if post.file_upload %}
        <p>File: <a href="{{ post.file_upload.url }}">{{ post.get_file_name }}</a></p>
    {% endif %}
    
    {% if post.head_image %}
        <img src="{{ post.head_image.url }}" alt="Image for {{ post.title }}">
    {% endif %}

    <!-- 로그인한 사용자가 글 작성자일 때만 수정/삭제 버튼 보이기 -->
    {% if user.is_authenticated and request.user == post.author %}
        <!-- 수정 버튼 -->
        <a href="{% url 'blog_page:post_edit' post.pk %}">
            <button type="button">수정</button>
        </a>

        <!-- 삭제 버튼: 삭제 확인 페이지로 이동 -->
        <a href="{% url 'blog_page:post_delete' post.pk %}">
            <button type="button">삭제</button>
        </a>
    {% endif %}

    <h3>Comments</h3>
    <ul>
        {% for comment in post.comment_set.all %}
            <li>{{ comment.author }}: {{ comment.content }} ({{ comment.created_at }})</li>
        {% endfor %}
    </ul>

    <!-- 현재 로그인한 사용자 정보 표시 -->
    {% if user.is_authenticated %}
        <p>현재 로그인 사용자: {{ user.username }}</p>
    {% else %}
        <p>로그인 후 댓글을 남길 수 있습니다.</p>
    {% endif %}
{% endblock %}

